<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Files | Y2 Analytics Coding Standards</title>
  <meta name="description" content="Coding style guide" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Files | Y2 Analytics Coding Standards" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Coding style guide" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Files | Y2 Analytics Coding Standards" />
  
  <meta name="twitter:description" content="Coding style guide" />
  



<meta name="date" content="2020-09-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="syntax.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Y2 Analytics Style Guide</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="files.html"><a href="files.html"><i class="fa fa-check"></i><b>1</b> Files</a><ul>
<li class="chapter" data-level="1.1" data-path="files.html"><a href="files.html#file-names"><i class="fa fa-check"></i><b>1.1</b> File Names</a></li>
<li class="chapter" data-level="1.2" data-path="files.html"><a href="files.html#internal-structure"><i class="fa fa-check"></i><b>1.2</b> Internal structure</a><ul>
<li class="chapter" data-level="1.2.1" data-path="files.html"><a href="files.html#sections"><i class="fa fa-check"></i><b>1.2.1</b> Sections</a></li>
<li class="chapter" data-level="1.2.2" data-path="files.html"><a href="files.html#packages"><i class="fa fa-check"></i><b>1.2.2</b> Packages</a></li>
<li class="chapter" data-level="1.2.3" data-path="files.html"><a href="files.html#file-paths"><i class="fa fa-check"></i><b>1.2.3</b> File paths</a></li>
<li class="chapter" data-level="1.2.4" data-path="files.html"><a href="files.html#data-manipulation"><i class="fa fa-check"></i><b>1.2.4</b> Data manipulation</a></li>
<li class="chapter" data-level="1.2.5" data-path="files.html"><a href="files.html#annotation-and-commented-code"><i class="fa fa-check"></i><b>1.2.5</b> Annotation and commented code</a></li>
<li class="chapter" data-level="1.2.6" data-path="files.html"><a href="files.html#indentation"><i class="fa fa-check"></i><b>1.2.6</b> Indentation</a></li>
<li class="chapter" data-level="1.2.7" data-path="files.html"><a href="files.html#function-use"><i class="fa fa-check"></i><b>1.2.7</b> Function use</a></li>
<li class="chapter" data-level="1.2.8" data-path="files.html"><a href="files.html#reproducibility"><i class="fa fa-check"></i><b>1.2.8</b> Reproducibility</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="syntax.html"><a href="syntax.html"><i class="fa fa-check"></i><b>2</b> Syntax</a><ul>
<li class="chapter" data-level="2.1" data-path="syntax.html"><a href="syntax.html#object-names"><i class="fa fa-check"></i><b>2.1</b> Object names</a></li>
<li class="chapter" data-level="2.2" data-path="syntax.html"><a href="syntax.html#spacing"><i class="fa fa-check"></i><b>2.2</b> Spacing</a><ul>
<li class="chapter" data-level="2.2.1" data-path="syntax.html"><a href="syntax.html#commas"><i class="fa fa-check"></i><b>2.2.1</b> Commas</a></li>
<li class="chapter" data-level="2.2.2" data-path="syntax.html"><a href="syntax.html#parentheses"><i class="fa fa-check"></i><b>2.2.2</b> Parentheses</a></li>
<li class="chapter" data-level="2.2.3" data-path="syntax.html"><a href="syntax.html#embracing"><i class="fa fa-check"></i><b>2.2.3</b> Embracing</a></li>
<li class="chapter" data-level="2.2.4" data-path="syntax.html"><a href="syntax.html#infix-operators"><i class="fa fa-check"></i><b>2.2.4</b> Infix operators</a></li>
<li class="chapter" data-level="2.2.5" data-path="syntax.html"><a href="syntax.html#extra-spaces"><i class="fa fa-check"></i><b>2.2.5</b> Extra spaces</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="syntax.html"><a href="syntax.html#function-calls"><i class="fa fa-check"></i><b>2.3</b> Function calls</a><ul>
<li class="chapter" data-level="2.3.1" data-path="syntax.html"><a href="syntax.html#argument-names"><i class="fa fa-check"></i><b>2.3.1</b> Named arguments</a></li>
<li class="chapter" data-level="2.3.2" data-path="syntax.html"><a href="syntax.html#assignment"><i class="fa fa-check"></i><b>2.3.2</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="syntax.html"><a href="syntax.html#control-flow"><i class="fa fa-check"></i><b>2.4</b> Control flow</a><ul>
<li class="chapter" data-level="2.4.1" data-path="syntax.html"><a href="syntax.html#indenting"><i class="fa fa-check"></i><b>2.4.1</b> Code blocks</a></li>
<li class="chapter" data-level="2.4.2" data-path="syntax.html"><a href="syntax.html#inline-statements"><i class="fa fa-check"></i><b>2.4.2</b> Inline statements</a></li>
<li class="chapter" data-level="2.4.3" data-path="syntax.html"><a href="syntax.html#implicit-type-coercion"><i class="fa fa-check"></i><b>2.4.3</b> Implicit type coercion</a></li>
<li class="chapter" data-level="2.4.4" data-path="syntax.html"><a href="syntax.html#switch-statements"><i class="fa fa-check"></i><b>2.4.4</b> Switch statements</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="syntax.html"><a href="syntax.html#long-lines"><i class="fa fa-check"></i><b>2.5</b> Long lines</a></li>
<li class="chapter" data-level="2.6" data-path="syntax.html"><a href="syntax.html#semicolons"><i class="fa fa-check"></i><b>2.6</b> Semicolons</a></li>
<li class="chapter" data-level="2.7" data-path="syntax.html"><a href="syntax.html#assignment-1"><i class="fa fa-check"></i><b>2.7</b> Assignment</a></li>
<li class="chapter" data-level="2.8" data-path="syntax.html"><a href="syntax.html#data"><i class="fa fa-check"></i><b>2.8</b> Data</a><ul>
<li class="chapter" data-level="2.8.1" data-path="syntax.html"><a href="syntax.html#character-vectors"><i class="fa fa-check"></i><b>2.8.1</b> Character vectors</a></li>
<li class="chapter" data-level="2.8.2" data-path="syntax.html"><a href="syntax.html#logical-vectors"><i class="fa fa-check"></i><b>2.8.2</b> Logical vectors</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="syntax.html"><a href="syntax.html#comments"><i class="fa fa-check"></i><b>2.9</b> Comments</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>3</b> Functions</a><ul>
<li class="chapter" data-level="3.1" data-path="functions.html"><a href="functions.html#naming"><i class="fa fa-check"></i><b>3.1</b> Naming</a></li>
<li class="chapter" data-level="3.2" data-path="syntax.html"><a href="syntax.html#long-lines"><i class="fa fa-check"></i><b>3.2</b> Long lines</a></li>
<li class="chapter" data-level="3.3" data-path="functions.html"><a href="functions.html#return"><i class="fa fa-check"></i><b>3.3</b> <code>return()</code></a></li>
<li class="chapter" data-level="3.4" data-path="syntax.html"><a href="syntax.html#comments"><i class="fa fa-check"></i><b>3.4</b> Comments</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="pipes.html"><a href="pipes.html"><i class="fa fa-check"></i><b>4</b> Pipes</a><ul>
<li class="chapter" data-level="4.1" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="pipes.html"><a href="pipes.html#whitespace"><i class="fa fa-check"></i><b>4.2</b> Whitespace</a></li>
<li class="chapter" data-level="4.3" data-path="syntax.html"><a href="syntax.html#long-lines"><i class="fa fa-check"></i><b>4.3</b> Long lines</a></li>
<li class="chapter" data-level="4.4" data-path="pipes.html"><a href="pipes.html#short-pipes"><i class="fa fa-check"></i><b>4.4</b> Short pipes</a></li>
<li class="chapter" data-level="4.5" data-path="pipes.html"><a href="pipes.html#no-arguments"><i class="fa fa-check"></i><b>4.5</b> No arguments</a></li>
<li class="chapter" data-level="4.6" data-path="syntax.html"><a href="syntax.html#assignment"><i class="fa fa-check"></i><b>4.6</b> Assignment</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Y2 Analytics Coding Standards</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="files" class="section level1">
<h1><span class="header-section-number">Chapter 1</span> Files</h1>
<div id="file-names" class="section level2">
<h2><span class="header-section-number">1.1</span> File Names</h2>
<p>File names should be concise but meaningful and end in <code>.R</code>. Avoid using special characters in file names - stick with numbers, letters, <code>-</code>, and <code>_</code>. Include your initials at the end of a file name.</p>
<p>For projects with multiple code files, include a two digit number at the beginning of the file name. This makes it easy to understand the workflow of past projects. If multiple analysts are coding the same step of a project (such as chart creation), each code file should begin with the same number. If it seems likely you’ll have more than 10 files, left pad with zero:</p>
<pre><code># Good
01 Modeling MTG.R
04 - utility_functions XYZ.R
06 Charts ABC.R
06 Charts DEF.R

# Bad
1fitModels.R
foo.r
stuff.r</code></pre>
</div>
<div id="internal-structure" class="section level2">
<h2><span class="header-section-number">1.2</span> Internal structure</h2>
<div id="sections" class="section level3">
<h3><span class="header-section-number">1.2.1</span> Sections</h3>
<p>Use commented lines of <code>-</code> and <code>=</code> to break up your file into easily readable
chunks. The keyboard shortcut for creating sections is <code>command + shift + r</code>. Section headers should describe the research objective of the code they contain.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># Load data ---------------------------</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co"># Plot data ---------------------------</span></a></code></pre></div>
</div>
<div id="packages" class="section level3">
<h3><span class="header-section-number">1.2.2</span> Packages</h3>
<p>If your script uses add-on packages, load them all at once at the very
beginning of the file. This is more transparent than sprinkling <code>library()</code>
calls throughout your code or having hidden dependencies that are loaded in a
startup file, such as <code>.Rprofile</code>.</p>
<p>Do not load packages you do not use. Never load the <code>magrittr</code> package.</p>
<p>Do not include <code>install.packages('packagename')</code> in your code, whether or not the command is commented out.</p>
<p>If you need to load the <code>plyr</code> package, do so before loading <code>tidyverse</code> or <code>dplyr</code>.</p>
</div>
<div id="file-paths" class="section level3">
<h3><span class="header-section-number">1.2.3</span> File paths</h3>
<p>Add a project path constant at the top of your code, and use the project path to read in and save out data files and output. This makes it easy to change the project path and avoid errors when the project folder is moved.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">PROJECT_PATH &lt;-<span class="st"> &quot;~/Dropbox (Y2 Analytics)/Y2 Analytics Team Folder/Resources/Coding Style Guide/&quot;</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">responses &lt;-<span class="st"> </span><span class="kw">read_sav</span>(<span class="kw">str_c</span>(PROJECT_PATH, <span class="st">&quot;data file.sav&quot;</span>))</a></code></pre></div>
</div>
<div id="data-manipulation" class="section level3">
<h3><span class="header-section-number">1.2.4</span> Data manipulation</h3>
<p>New variables that will be referenced more than once should be created in a global mutate section towards the top of the code, close to or in the same section where the data is read in. If a variable will only be used in one section of analysis then it should be created as close to its use as possible.</p>
<p>Global variables you create should be given new names rather than replacing the existing variable they are based on.</p>
<p>Variables should be created using tidyverse functions and syntax where possible. Data manipulation should be done in as few steps as possible-don’t use multiple mutate functions where one would suffice.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># Good</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">responses &lt;-<span class="st"> </span>responses <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">        <span class="dt">var_example_1 =</span> <span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">            <span class="co"># do something</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6">        ),</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">        <span class="dt">var_example_2 =</span> <span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">            <span class="co"># do something</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9">        ),</a>
<a class="sourceLine" id="cb4-10" data-line-number="10">        <span class="dt">var_example_3 =</span> <span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb4-11" data-line-number="11">            <span class="co"># do something</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12">        ))</a>
<a class="sourceLine" id="cb4-13" data-line-number="13"></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co"># Bad</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15">responses &lt;-<span class="st"> </span>responses <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb4-17" data-line-number="17">        <span class="dt">var_example_1 =</span> <span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb4-18" data-line-number="18">            <span class="co"># do something</span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19">        )</a>
<a class="sourceLine" id="cb4-20" data-line-number="20">    ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-21" data-line-number="21"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb4-22" data-line-number="22">        <span class="dt">var_example_2 =</span> <span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb4-23" data-line-number="23">            <span class="co"># do something</span></a>
<a class="sourceLine" id="cb4-24" data-line-number="24">        )</a>
<a class="sourceLine" id="cb4-25" data-line-number="25">    )</a>
<a class="sourceLine" id="cb4-26" data-line-number="26"><span class="co"># some other code</span></a>
<a class="sourceLine" id="cb4-27" data-line-number="27">responses &lt;-<span class="st"> </span>responses <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-28" data-line-number="28"><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">var_example_3 =</span> <span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb4-29" data-line-number="29">        <span class="co">#do something</span></a>
<a class="sourceLine" id="cb4-30" data-line-number="30">    ))</a></code></pre></div>
</div>
<div id="annotation-and-commented-code" class="section level3">
<h3><span class="header-section-number">1.2.5</span> Annotation and commented code</h3>
<p>Code should be annotated in a way that makes it easy to understand without being intimately familiar with the project. Annotations should be included throughout a code file, and should explain <em>why</em> analysis is being done rather than describing <em>what</em> analysis is being performed.</p>
<p>Data exploration should not be included unless it is relevant to analysis. If data exploration is useful, annotate why you were checking something and comment out the code.</p>
</div>
<div id="indentation" class="section level3">
<h3><span class="header-section-number">1.2.6</span> Indentation</h3>
<p>Code should have consistent indenting through the file. An easy way to make sure your indentation is standardized is to highlight a code chunk and use <code>command + I</code>.</p>
</div>
<div id="function-use" class="section level3">
<h3><span class="header-section-number">1.2.7</span> Function use</h3>
<p>Functions should be used in place of copying and pasting code chunks. A good rule of thumb is if you have to reuse code more than 3 times, you should create a function.</p>
</div>
<div id="reproducibility" class="section level3">
<h3><span class="header-section-number">1.2.8</span> Reproducibility</h3>
<p>After writing a script, ensure that it runs correctly and is reproducible by cleaning R’s memory and rerunning the script.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="syntax.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
